# Инструкция по созданию справочника "ПищеваяЦенностьИнгредиентов"

## Пошаговая инструкция

### Шаг 1: Создание справочника
1. Открыть конфигуратор 1С
2. В дереве конфигурации выбрать **Справочники**
3. Нажать правой кнопкой мыши → **Добавить**
4. Указать имя: **ПищеваяЦенностьИнгредиентов**
5. Указать синоним: **Пищевая ценность ингредиентов**

### Шаг 2: Настройка основных свойств справочника
В свойствах справочника установить:
- **Длина кода**: 9
- **Тип кода**: Строка
- **Автонумерация**: Истина
- **Длина наименования**: 150
- **Иерархический**: Ложь
- **Владельцы**: не устанавливать

### Шаг 3: Создание реквизитов

#### 3.1 Реквизит "Ингредиент"
1. В разделе **Реквизиты** нажать **Добавить**
2. **Имя**: Ингредиент
3. **Синоним**: Ингредиент
4. **Тип**: СправочникСсылка.Ингредиенты
5. **Заполнение**: Проверять
6. **Индексировать**: Истина

#### 3.2 Реквизит "Калорийность"
1. **Имя**: Калорийность
2. **Синоним**: Калорийность (ккал на 100г)
3. **Тип**: Число
4. **Длина**: 15
5. **Точность**: 2
6. **Неотрицательное**: Истина

#### 3.3 Реквизит "Белки"
1. **Имя**: Белки
2. **Синоним**: Белки (г на 100г)
3. **Тип**: Число
4. **Длина**: 15
5. **Точность**: 2
6. **Неотрицательное**: Истина

#### 3.4 Реквизит "Жиры"
1. **Имя**: Жиры
2. **Синоним**: Жиры (г на 100г)
3. **Тип**: Число
4. **Длина**: 15
5. **Точность**: 2
6. **Неотрицательное**: Истина

#### 3.5 Реквизит "Углеводы"
1. **Имя**: Углеводы
2. **Синоним**: Углеводы (г на 100г)
3. **Тип**: Число
4. **Длина**: 15
5. **Точность**: 2
6. **Неотрицательное**: Истина

### Шаг 4: Создание формы списка

#### 4.1 Основные настройки формы
1. В разделе **Формы** создать **ФормаСписка**
2. В командной панели добавить стандартные команды:
   - СоздатьЭлемент
   - ИзменитьЭлемент
   - УдалитьЭлемент
   - СкопироватьЭлемент

#### 4.2 Настройка таблицы списка
В элементе **Список** добавить колонки:
1. **Ингредиент** - ширина 25
2. **Калорийность** - ширина 12
3. **Белки** - ширина 10
4. **Жиры** - ширина 10
5. **Углеводы** - ширина 12

### Шаг 5: Создание формы элемента

#### 5.1 Создание формы
1. Создать **ФормаЭлемента**
2. Разместить поля в следующем порядке:
   - Наименование
   - Ингредиент
   - Калорийность
   - Белки
   - Жиры
   - Углеводы

#### 5.2 Настройка элементов формы
- **Ингредиент**:
  - Быстрый выбор: Истина
  - КнопкаВыбора: Истина
- **Числовые поля** (Калорийность, Белки, Жиры, Углеводы):
  - Формат: "ЧДЦ=2; ЧН=0,00"
  - Ширина: 12

### Шаг 6: Создание модуля объекта (необязательно)

Если нужны дополнительные проверки, создать модуль объекта с процедурой:

```bsl
Процедура ОбработкаПроверкиЗаполнения(Отказ, ПроверяемыеРеквизиты)

	// Проверяем уникальность ингредиента
	Если ЗначениеЗаполнено(Ингредиент) Тогда

		Запрос = Новый Запрос;
		Запрос.Текст =
		"ВЫБРАТЬ
		|	ПищеваяЦенностьИнгредиентов.Ссылка
		|ИЗ
		|	Справочник.ПищеваяЦенностьИнгредиентов КАК ПищеваяЦенностьИнгредиентов
		|ГДЕ
		|	ПищеваяЦенностьИнгредиентов.Ингредиент = &Ингредиент
		|	И ПищеваяЦенностьИнгредиентов.Ссылка <> &ТекущаяСсылка";

		Запрос.УстановитьПараметр("Ингредиент", Ингредиент);
		Запрос.УстановитьПараметр("ТекущаяСсылка", Ссылка);

		Если НЕ Запрос.Выполнить().Пустой() Тогда
			Сообщить("Пищевая ценность для данного ингредиента уже существует!");
			Отказ = Истина;
		КонецЕсли;

	КонецЕсли;

КонецПроцедуры
```

### Шаг 7: Права доступа
1. В разделе **Роли** для соответствующих ролей дать права:
   - **Чтение**: Истина
   - **Добавление**: Истина (для пользователей, которые могут добавлять данные)
   - **Изменение**: Истина (для пользователей, которые могут редактировать)
   - **Удаление**: по необходимости

### Шаг 8: Обновление конфигурации базы данных
1. После создания справочника выполнить **Конфигурация** → **Обновить конфигурацию базы данных**
2. Проверить отсутствие ошибок в журнале

### Шаг 9: Заполнение тестовыми данными
Создать несколько элементов справочника для тестирования:

**Пример записей:**

| Ингредиент | Калорийность | Белки | Жиры | Углеводы |
|------------|--------------|-------|------|----------|
| Мука пшеничная | 342 | 10.8 | 1.3 | 70.6 |
| Молоко 3.2% | 58 | 2.9 | 3.2 | 4.7 |
| Яйцо куриное | 157 | 12.7 | 11.5 | 0.7 |
| Масло сливочное | 748 | 0.5 | 82.5 | 0.8 |
| Сахар | 399 | 0 | 0 | 99.7 |

### Шаг 10: Проверка работы
1. Открыть справочник в пользовательском режиме
2. Создать несколько записей
3. Убедиться, что все поля заполняются корректно
4. Проверить работу поиска и отбора

## Дополнительные рекомендации

### Оптимизация производительности
- Создать индекс по полю **Ингредиент** для ускорения поиска
- При большом количестве записей рассмотреть возможность группировки по категориям ингредиентов

### Расширения функциональности
В будущем можно добавить:
- Реквизит "Источник данных" (откуда взяты данные о пищевой ценности)
- Реквизит "Дата актуализации"
- Дополнительные витамины и минералы
- Возможность ведения истории изменений

### Интеграция с техкарточками
После создания справочника обновленный код в модуле формы техкарточек будет автоматически использовать данные из нового справочника для расчета пищевой ценности блюд.